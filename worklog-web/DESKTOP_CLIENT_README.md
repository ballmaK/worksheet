# WorkLog 桌面客户端使用说明

## 🚀 快速开始

### 启动桌面客户端

1. **确保后端服务已启动**
   ```bash
   # 在后端目录启动服务
   cd worklog
   python main.py
   ```

2. **启动桌面客户端**
   ```bash
   # 在桌面客户端目录
   cd worklog-web
   
   # Windows用户可以直接双击
   start-desktop.bat
   
   # 或者使用命令行
   npm run electron:dev
   ```

### 构建安装包

```bash
# Windows用户可以直接双击
build-desktop.bat

# 或者使用命令行
npm run electron:build
```

## 🎯 工作模式功能

### 什么是工作模式？

工作模式是一个专注工作的功能，当你进入工作模式时：
- ✅ 主窗口自动隐藏
- ✅ 只显示悬浮任务栏
- ✅ 任务栏始终置顶
- ✅ 任务栏不在任务栏显示（避免干扰）
- ✅ 点击系统托盘图标快速访问任务栏

### 如何切换工作模式？

1. **通过界面按钮**
   - 在主界面右上角找到"进入工作模式"按钮
   - 点击即可切换工作模式

2. **通过系统托盘**
   - 右键点击系统托盘图标
   - 选择"进入工作模式"或"退出工作模式"

3. **通过快捷键**
   - `Ctrl + Shift + W` - 切换工作模式

### 工作模式下的操作

- **显示主窗口**: 通过系统托盘菜单或快捷键
- **访问任务栏**: 点击系统托盘图标
- **退出工作模式**: 通过界面按钮或托盘菜单

## 🎨 界面功能

### 主界面
- **工作看板**: 查看和管理任务
- **日历视图**: 时间线管理
- **消息中心**: 接收通知和消息
- **WebSocket测试**: 测试实时连接
- **通知测试**: 测试通知功能

### 悬浮任务栏
- **任务切换**: 快速切换当前任务
- **工作计时**: 开始/暂停工作计时
- **快速记录**: 快速记录工作内容
- **窗口控制**: 调整大小和位置

### 系统托盘
- **工作模式切换**: 快速进入/退出工作模式
- **窗口控制**: 显示/隐藏主窗口和任务栏
- **快速访问**: 点击托盘图标快速访问

## ⚙️ 配置选项

### 窗口设置
- **任务栏位置**: 可拖拽调整位置
- **任务栏大小**: 可调整窗口大小
- **置顶设置**: 工作模式下自动置顶

### 通知设置
- **系统通知**: 支持Windows系统通知
- **声音提醒**: 可配置声音提醒
- **通知内容**: 自定义通知内容

## 🔧 开发模式

### 启动开发环境
```bash
# 启动前端开发服务器
npm run dev

# 启动桌面客户端
npm run electron:dev
```

### 调试功能
- **开发者工具**: 开发模式下自动打开
- **热重载**: 代码修改后自动刷新
- **错误日志**: 控制台显示详细错误信息

## 📦 构建和分发

### 构建安装包
```bash
# 构建所有平台
npm run electron:build

# 构建特定平台
npm run electron:build -- --win
npm run electron:build -- --mac
npm run electron:build -- --linux
```

### 安装包位置
构建完成后，安装包位于 `dist_electron/` 目录：
- **Windows**: `.exe` 安装文件
- **macOS**: `.dmg` 安装文件
- **Linux**: `.AppImage` 文件

## 🐛 常见问题

### 1. 启动失败
- 确保Node.js版本 >= 16
- 确保后端服务已启动 (http://localhost:8000)
- 检查防火墙设置

### 2. 工作模式不工作
- 确保在桌面客户端中运行（非浏览器）
- 检查系统托盘图标是否显示
- 重启桌面客户端

### 3. 通知不显示
- 检查系统通知权限
- 确保Windows通知服务已启用
- 检查应用是否在后台运行

### 4. 任务栏无法移动
- 确保任务栏窗口处于活动状态
- 检查是否有其他应用占用鼠标事件
- 重启桌面客户端

## 📞 技术支持

如果遇到问题，请：
1. 查看控制台错误信息
2. 检查后端服务状态
3. 重启桌面客户端
4. 联系技术支持

## 🔄 更新日志

### v1.0.0
- ✅ 基础桌面客户端功能
- ✅ 工作模式支持
- ✅ 悬浮任务栏
- ✅ 系统托盘集成
- ✅ 实时通知支持
- ✅ 多平台构建支持 
# WorkLog Pro 功能设计文档

## 1. 工作日志台账页面设计

### 1.1 功能概述
工作日志台账页面是系统的核心功能，用于展示和管理所有工作日志记录，提供多维度的数据统计和分析功能。

### 1.2 页面布局设计

#### 1.2.1 页面结构
```
┌─────────────────────────────────────────────────────────────┐
│ 页面标题: 工作日志台账                                        │
├─────────────────────────────────────────────────────────────┤
│ 筛选条件区域                                                 │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│ │时间范围 │ │项目筛选 │ │用户筛选 │ │状态筛选 │ │搜索框   │ │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 统计概览区域                                                 │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│ │总工时   │ │今日工时 │ │本周工时 │ │本月工时 │ │平均工时 │ │
│ │8.5h     │ │2.5h     │ │32.5h    │ │156.5h   │ │7.8h/天  │ │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 操作按钮区域                                                 │
│ [新增日志] [批量导出] [批量删除] [刷新数据] [视图切换]        │
├─────────────────────────────────────────────────────────────┤
│ 数据展示区域                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 表格视图 / 卡片视图 / 日历视图                           │ │
│ │                                                         │ │
│ │ 表格列: 日期 | 用户 | 项目 | 任务 | 工时 | 状态 | 操作   │ │
│ │                                                         │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 分页区域                                                     │
│ [上一页] [1] [2] [3] ... [下一页] 共 100 条记录              │
└─────────────────────────────────────────────────────────────┘
```

#### 1.2.2 筛选条件设计
- **时间范围**: 今日、本周、本月、自定义日期范围
- **项目筛选**: 全部项目、指定项目、我的项目
- **用户筛选**: 全部用户、指定用户、我的日志
- **状态筛选**: 全部状态、进行中、已完成、已暂停
- **搜索框**: 支持按任务名称、工作内容、备注进行模糊搜索

#### 1.2.3 统计概览设计
- **总工时**: 筛选条件下的总工作时间
- **今日工时**: 今日已记录的工作时间
- **本周工时**: 本周累计工作时间
- **本月工时**: 本月累计工作时间
- **平均工时**: 筛选条件下的平均每日工时

### 1.3 数据展示模式

#### 1.3.1 表格视图
```
┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
│ 日期    │ 用户    │ 项目    │ 任务    │ 工时    │ 状态    │ 操作    │
├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ 2024-12-│ 张三    │ 项目A   │ 功能开发│ 8.5h    │ 已完成  │ [编辑]  │
│ 19      │         │         │         │         │         │ [删除]  │
├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤
│ 2024-12-│ 李四    │ 项目B   │ 测试    │ 6.0h    │ 进行中  │ [编辑]  │
│ 19      │         │         │         │         │         │ [删除]  │
└─────────┴─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘
```

#### 1.3.2 卡片视图
```
┌─────────────────────────────────────────────────────────────┐
│ 2024-12-19 张三 - 项目A                                      │
│ 任务: 用户管理模块开发                                        │
│ 工时: 8.5小时 | 状态: 已完成                                  │
│ 内容: 完成了用户注册、登录、权限管理等功能...                 │
│ [编辑] [删除] [查看详情]                                      │
└─────────────────────────────────────────────────────────────┘
```

#### 1.3.3 日历视图
```
┌─────────────────────────────────────────────────────────────┐
│                   2024年12月                                │
├─────┬─────┬─────┬─────┬─────┬─────┬─────┐                   │
│ 周日 │ 周一 │ 周二 │ 周三 │ 周四 │ 周五 │ 周六 │               │
├─────┼─────┼─────┼─────┼─────┼─────┼─────┤                   │
│     │     │     │     │     │     │  1  │                   │
│     │     │     │     │     │     │8.5h │                   │
├─────┼─────┼─────┼─────┼─────┼─────┼─────┤                   │
│  2  │  3  │  4  │  5  │  6  │  7  │  8  │                   │
│6.0h │7.5h │8.0h │6.5h │8.0h │5.5h │4.0h │                   │
└─────┴─────┴─────┴─────┴─────┴─────┴─────┘                   │
└─────────────────────────────────────────────────────────────┘
```

### 1.4 功能特性

#### 1.4.1 数据操作
- **新增日志**: 快速添加工作日志
- **编辑日志**: 修改已有日志内容
- **删除日志**: 删除不需要的日志
- **批量操作**: 支持批量删除、批量导出
- **数据导出**: 支持Excel、PDF格式导出

#### 1.4.2 数据统计
- **工时统计**: 按日、周、月统计工时
- **项目统计**: 各项目工时分布
- **用户统计**: 各用户工作量统计
- **趋势分析**: 工时变化趋势图表

#### 1.4.3 权限控制
- **查看权限**: 只能查看有权限的日志
- **编辑权限**: 只能编辑自己的日志
- **删除权限**: 只能删除自己的日志
- **管理权限**: 管理员可以管理所有日志

### 1.5 API接口设计

#### 1.5.1 获取日志列表
```http
GET /api/v1/work-logs/ledger
Query Parameters:
- start_date: 开始日期 (YYYY-MM-DD)
- end_date: 结束日期 (YYYY-MM-DD)
- project_id: 项目ID
- user_id: 用户ID
- status: 状态 (in_progress, completed, paused)
- keyword: 搜索关键词
- page: 页码
- size: 每页数量
```

#### 1.5.2 获取统计信息
```http
GET /api/v1/work-logs/statistics
Query Parameters:
- start_date: 开始日期
- end_date: 结束日期
- project_id: 项目ID
- user_id: 用户ID
```

#### 1.5.3 批量操作
```http
POST /api/v1/work-logs/batch
Body:
{
  "action": "delete|export",
  "ids": [1, 2, 3, ...]
}
```

---

## 2. 团队管理页面功能设计

### 2.1 功能概述
团队管理页面提供完整的团队管理功能，包括团队信息管理、成员管理、项目关联、团队动态等功能。

### 2.2 页面布局设计

#### 2.2.1 团队概览页面
```
┌─────────────────────────────────────────────────────────────┐
│ 团队管理 - [团队名称]                                        │
├─────────────────────────────────────────────────────────────┤
│ 团队信息卡片                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 团队名称: 技术开发团队                                     │ │
│ │ 团队描述: 负责公司核心产品的技术开发和维护                │ │
│ │ 创建时间: 2024-01-15 | 成员数量: 8人                      │ │
│ │ 项目数量: 5个 | 活跃状态: 活跃                            │ │
│ │ [编辑团队] [邀请成员] [团队设置]                          │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 功能导航标签                                                 │
│ [成员管理] [项目列表] [团队动态] [团队设置] [权限管理]        │
├─────────────────────────────────────────────────────────────┤
│ 内容展示区域                                                 │
│ (根据选择的标签显示不同内容)                                  │
└─────────────────────────────────────────────────────────────┘
```

#### 2.2.2 成员管理标签页
```
┌─────────────────────────────────────────────────────────────┐
│ 成员管理                                                     │
├─────────────────────────────────────────────────────────────┤
│ 操作区域                                                     │
│ [邀请新成员] [批量操作] [导出成员列表]                        │
├─────────────────────────────────────────────────────────────┤
│ 成员列表                                                     │
│ ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐ │
│ │ 头像    │ 姓名    │ 角色    │ 加入时间│ 状态    │ 操作    │ │
│ ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤ │
│ │ [头像]  │ 张三    │ 管理员  │ 2024-01-│ 活跃    │ [编辑]  │ │
│ │         │         │         │ 15      │         │ [移除]  │ │
│ ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤ │
│ │ [头像]  │ 李四    │ 成员    │ 2024-01-│ 活跃    │ [编辑]  │ │
│ │         │         │         │ 20      │         │ [移除]  │ │
│ └─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘ │
└─────────────────────────────────────────────────────────────┘
```

#### 2.2.3 项目列表标签页
```
┌─────────────────────────────────────────────────────────────┐
│ 团队项目列表                                                 │
├─────────────────────────────────────────────────────────────┤
│ 筛选条件                                                     │
│ [全部项目] [进行中] [已完成] [已暂停] [搜索项目]              │
├─────────────────────────────────────────────────────────────┤
│ 项目卡片列表                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 项目A - 电商平台开发                                      │ │
│ │ 进度: 75% | 状态: 进行中 | 负责人: 张三                    │ │
│ │ 开始时间: 2024-01-01 | 预计完成: 2024-06-30               │ │
│ │ 成员: 张三, 李四, 王五                                    │ │
│ │ [查看详情] [编辑项目] [项目动态]                          │ │
│ └─────────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 项目B - 移动端APP开发                                     │ │
│ │ 进度: 45% | 状态: 进行中 | 负责人: 李四                    │ │
│ │ 开始时间: 2024-02-01 | 预计完成: 2024-08-30               │ │
│ │ 成员: 李四, 王五, 赵六                                    │ │
│ │ [查看详情] [编辑项目] [项目动态]                          │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

#### 2.2.4 团队动态标签页
```
┌─────────────────────────────────────────────────────────────┐
│ 团队动态                                                     │
├─────────────────────────────────────────────────────────────┤
│ 动态时间线                                                   │
│                                                             │
│ 2024-12-19 14:30                                            │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [头像] 张三 完成了任务 "用户管理模块开发"                  │ │
│ │ 项目: 电商平台开发 | 工时: 8.5小时                        │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 2024-12-19 12:15                                            │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [头像] 李四 加入了项目 "移动端APP开发"                     │ │
│ │ 角色: 开发工程师                                          │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 2024-12-19 10:00                                            │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [头像] 王五 创建了新任务 "数据库优化"                      │ │
│ │ 项目: 电商平台开发 | 优先级: 高                           │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 2.3 编辑团队功能设计

#### 2.3.1 编辑团队对话框
```
┌─────────────────────────────────────────────────────────────┐
│ 编辑团队信息                                                 │
├─────────────────────────────────────────────────────────────┤
│ 团队名称: [技术开发团队                    ]                 │
│ 团队描述: [负责公司核心产品的技术开发和维护                ] │
│ 团队头像: [上传图片] [当前头像预览]                          │
│ 团队标签: [技术] [开发] [核心] [x] [添加标签]                │
│ 可见性: ○ 公开团队  ● 私有团队                              │
│ 邀请设置: ● 允许成员邀请  ○ 仅管理员邀请                    │
├─────────────────────────────────────────────────────────────┤
│ [保存] [取消]                                               │
└─────────────────────────────────────────────────────────────┘
```

### 2.4 功能特性

#### 2.4.1 成员管理
- **邀请成员**: 通过邮箱邀请新成员
- **角色管理**: 设置成员角色（管理员、成员）
- **权限控制**: 不同角色拥有不同权限
- **成员状态**: 活跃、离线、离开状态管理
- **批量操作**: 批量邀请、批量移除

#### 2.4.2 项目关联
- **项目列表**: 显示团队关联的所有项目
- **项目状态**: 实时显示项目进度和状态
- **成员分配**: 查看项目成员分配情况
- **项目动态**: 项目相关的最新动态

#### 2.4.3 团队动态
- **实时更新**: 团队成员活动实时显示
- **动态类型**: 任务完成、成员加入、项目创建等
- **时间线展示**: 按时间顺序展示动态
- **筛选功能**: 按类型、时间筛选动态

### 2.5 API接口设计

#### 2.5.1 获取团队信息
```http
GET /api/v1/teams/{team_id}
```

#### 2.5.2 更新团队信息
```http
PUT /api/v1/teams/{team_id}
Body:
{
  "name": "团队名称",
  "description": "团队描述",
  "avatar": "头像URL",
  "tags": ["标签1", "标签2"],
  "visibility": "public|private",
  "invite_permission": "admin_only|member_allowed"
}
```

#### 2.5.3 获取团队项目列表
```http
GET /api/v1/teams/{team_id}/projects
Query Parameters:
- status: 项目状态
- keyword: 搜索关键词
- page: 页码
- size: 每页数量
```

#### 2.5.4 获取团队动态
```http
GET /api/v1/teams/{team_id}/activities
Query Parameters:
- type: 动态类型
- start_date: 开始日期
- end_date: 结束日期
- page: 页码
- size: 每页数量
```

---

## 3. 具体项目管理页面设计

### 3.1 功能概述
项目管理页面提供详细的项目信息展示、任务管理、进度跟踪、成员协作等功能，是项目管理的核心界面。

### 3.2 页面布局设计

#### 3.2.1 项目概览页面
```
┌─────────────────────────────────────────────────────────────┐
│ 项目管理 - [项目名称]                                        │
├─────────────────────────────────────────────────────────────┤
│ 项目信息头部                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 项目名称: 电商平台开发                                    │ │
│ │ 项目描述: 开发一个完整的电商平台，包含用户管理、商品管理、│ │
│ │          订单管理、支付系统等功能                        │ │
│ │ 进度: 75% ████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░ │ │
│ │ 状态: 进行中 | 优先级: 高 | 负责人: 张三                   │ │
│ │ 开始时间: 2024-01-01 | 预计完成: 2024-06-30               │ │
│ │ [编辑项目] [项目设置] [导出项目] [删除项目]                │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 功能导航标签                                                 │
│ [概览] [任务] [成员] [文档] [动态] [设置]                    │
├─────────────────────────────────────────────────────────────┤
│ 内容展示区域                                                 │
│ (根据选择的标签显示不同内容)                                  │
└─────────────────────────────────────────────────────────────┘
```

#### 3.2.2 项目概览标签页
```
┌─────────────────────────────────────────────────────────────┐
│ 项目概览                                                     │
├─────────────────────────────────────────────────────────────┤
│ 统计卡片区域                                                 │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│ │总任务   │ │已完成   │ │进行中   │ │待开始   │ │总工时   │ │
│ │25个     │ │18个     │ │5个      │ │2个      │ │156.5h   │ │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 进度图表区域                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 项目进度趋势图                                           │ │
│ │                                                         │ │
│ │ 100% ████████████████████████████████████████████████████ │ │
│ │  80% ████████████████████████████████████████████████░░░░ │ │
│ │  60% ████████████████████████████████████████████░░░░░░░░ │ │
│ │  40% ████████████████████████████████████░░░░░░░░░░░░░░░░ │ │
│ │  20% ████████████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │ │
│ │   0% ████████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │ │
│ │      1月  2月  3月  4月  5月  6月                        │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 最近活动区域                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 最近活动                                                 │ │
│ │ 2024-12-19 14:30 张三完成了任务"用户管理模块开发"          │ │
│ │ 2024-12-19 12:15 李四创建了新任务"商品管理模块"            │ │
│ │ 2024-12-19 10:00 王五更新了项目进度为75%                  │ │
│ │ 2024-12-18 16:45 赵六加入了项目                           │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

#### 3.2.3 任务管理标签页
```
┌─────────────────────────────────────────────────────────────┐
│ 任务管理                                                     │
├─────────────────────────────────────────────────────────────┤
│ 操作区域                                                     │
│ [新建任务] [批量操作] [导入任务] [导出任务] [视图切换]        │
├─────────────────────────────────────────────────────────────┤
│ 筛选条件                                                     │
│ [全部任务] [我的任务] [待开始] [进行中] [已完成] [已暂停]     │
├─────────────────────────────────────────────────────────────┤
│ 任务列表                                                     │
│ ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐ │
│ │ 任务名称│ 负责人  │ 优先级  │ 状态    │ 进度    │ 截止日期│ │
│ ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤ │
│ │用户管理 │ 张三    │ 高      │ 已完成  │ 100%    │ 12-20   │ │
│ │模块开发 │         │         │         │         │         │ │
│ ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤ │
│ │商品管理 │ 李四    │ 中      │ 进行中  │ 60%     │ 12-25   │ │
│ │模块开发 │         │         │         │         │         │ │
│ ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤ │
│ │订单管理 │ 王五    │ 高      │ 待开始  │ 0%      │ 12-30   │ │
│ │模块开发 │         │         │         │         │         │ │
│ └─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘ │
└─────────────────────────────────────────────────────────────┘
```

#### 3.2.4 项目成员标签页
```
┌─────────────────────────────────────────────────────────────┐
│ 项目成员                                                     │
├─────────────────────────────────────────────────────────────┤
│ 操作区域                                                     │
│ [邀请成员] [批量操作] [导出成员列表]                          │
├─────────────────────────────────────────────────────────────┤
│ 成员列表                                                     │
│ ┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐ │
│ │ 头像    │ 姓名    │ 角色    │ 任务数  │ 工时    │ 状态    │ │
│ ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤ │
│ │ [头像]  │ 张三    │ 负责人  │ 8个     │ 45.5h   │ 活跃    │ │
│ ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤ │
│ │ [头像]  │ 李四    │ 开发    │ 6个     │ 38.2h   │ 活跃    │ │
│ ├─────────┼─────────┼─────────┼─────────┼─────────┼─────────┤ │
│ │ [头像]  │ 王五    │ 测试    │ 4个     │ 25.8h   │ 离线    │ │
│ └─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3.3 功能特性

#### 3.3.1 项目概览
- **项目信息**: 显示项目基本信息、进度、状态
- **统计图表**: 任务完成情况、工时统计、进度趋势
- **最近活动**: 项目相关的最新动态
- **快速操作**: 编辑项目、项目设置、导出数据

#### 3.3.2 任务管理
- **任务列表**: 显示项目所有任务
- **任务状态**: 待开始、进行中、已完成、已暂停
- **任务优先级**: 高、中、低优先级管理
- **任务分配**: 分配给指定成员
- **进度跟踪**: 实时更新任务进度

#### 3.3.3 成员协作
- **成员管理**: 邀请、移除项目成员
- **角色分配**: 负责人、开发、测试等角色
- **权限控制**: 不同角色拥有不同权限
- **工作量统计**: 各成员的任务数和工时统计

#### 3.3.4 项目文档
- **文档管理**: 项目相关文档上传、管理
- **版本控制**: 文档版本管理
- **协作编辑**: 支持多人协作编辑
- **文档分类**: 按类型分类管理文档

### 3.4 API接口设计

#### 3.4.1 获取项目详情
```http
GET /api/v1/projects/{project_id}
```

#### 3.4.2 更新项目信息
```http
PUT /api/v1/projects/{project_id}
Body:
{
  "name": "项目名称",
  "description": "项目描述",
  "status": "in_progress|completed|paused",
  "priority": "high|medium|low",
  "start_date": "2024-01-01",
  "end_date": "2024-06-30",
  "progress": 75
}
```

#### 3.4.3 获取项目任务列表
```http
GET /api/v1/projects/{project_id}/tasks
Query Parameters:
- status: 任务状态
- assignee_id: 负责人ID
- priority: 优先级
- keyword: 搜索关键词
- page: 页码
- size: 每页数量
```

#### 3.4.4 获取项目成员
```http
GET /api/v1/projects/{project_id}/members
```

#### 3.4.5 获取项目统计信息
```http
GET /api/v1/projects/{project_id}/statistics
```

#### 3.4.6 获取项目动态
```http
GET /api/v1/projects/{project_id}/activities
Query Parameters:
- type: 动态类型
- start_date: 开始日期
- end_date: 结束日期
- page: 页码
- size: 每页数量
```

---

## 4. 开发优先级建议

### 4.1 第一阶段：工作日志台账页面
**优先级**: 最高
**原因**: 是系统的核心功能，用户使用频率最高
**开发时间**: 3-5天

### 4.2 第二阶段：团队管理页面
**优先级**: 高
**原因**: 支持团队协作，提升用户体验
**开发时间**: 4-6天

### 4.3 第三阶段：项目管理页面
**优先级**: 中
**原因**: 完善项目管理功能，提升系统完整性
**开发时间**: 5-7天

## 5. 技术实现要点

### 5.1 前端技术要点
- **响应式设计**: 支持桌面和移动端
- **组件复用**: 设计可复用的UI组件
- **状态管理**: 使用Pinia管理复杂状态
- **实时更新**: WebSocket实现实时数据更新
- **图表展示**: 使用ECharts或Chart.js展示统计图表

### 5.2 后端技术要点
- **数据聚合**: 高效的数据库查询和聚合
- **缓存策略**: Redis缓存热点数据
- **权限控制**: 细粒度的权限管理
- **实时推送**: WebSocket推送动态更新
- **数据导出**: 支持多种格式的数据导出

### 5.3 数据库优化
- **索引优化**: 为常用查询字段添加索引
- **分页查询**: 大数据量的分页优化
- **关联查询**: 优化多表关联查询性能
- **数据统计**: 预计算常用统计数据

